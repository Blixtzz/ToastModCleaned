using BestHTTP.SecureProtocol.Org.BouncyCastle.Crypto;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using ToastClientCleaned.Controls;
using UnityEngine;
using VRC.Core;
using VRC;

namespace ToastModCleaned.Exploits
{
    public class Esp : BaseModule
    {
        static HighlightsFXStandalone friendH;
        static HighlightsFXStandalone othersH;
        public static void HighlightPlayer(Player player, bool state)
        {
            if (player != null)
            {
                if (state)
                {
                    Renderer renderer;
                    Transform select = player.transform.Find("SelectRegion");
                    renderer = (select?.GetComponent<Renderer>());
                    var highlightsFx = HighlightsFX.field_Private_Static_HighlightsFX_0;

                    friendH = highlightsFx.gameObject.AddComponent<HighlightsFXStandalone>();
                    friendH.highlightColor = Color.red;
                    othersH = highlightsFx.gameObject.AddComponent<HighlightsFXStandalone>();
                    othersH.highlightColor = Wrappers.General.GetTrustColor(player);

                    GetHighlightsFX(player.field_Private_APIUser_0).Method_Public_Void_Renderer_Boolean_0(renderer, state);
                }
            }
        }
        private static HighlightsFXStandalone GetHighlightsFX(APIUser apiUser)
        {
            if (APIUser.IsFriendsWith(apiUser.id))
                return friendH;
            return othersH;
        }
    }
}
